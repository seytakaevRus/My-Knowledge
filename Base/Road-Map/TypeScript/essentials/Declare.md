## Что это?

В `TS` `declare` это ключевое слово, использующееся для объявление сущностей, которые есть, но не реализованы в коде. Это помогает `TS` понять, что такие сущности вообще присутствуют и не генерировать ошибку, когда к ним пытаются обратиться.

Если говорить иначе, то использование `declare` позволяет описать `API`, будь то функция, переменная, модуль и т.д., а реализация пишется отдельно.

## Когда это может быть полезно?

>`declare` это скорее костыль, нежели хорошая практика, и если всё делать по уму, можно обойтись и без него, но некоторые сценарии принуждают к использованию `declare`.

### Глобальные переменные

В современной разработке редко когда используют глобальные переменные, но есть исключения:

- **Старые проекты**. Например, проект на чистом JS, который начали переписывать на TS. В нём могут быть глобальные объекты вроде `window.myAppConfig`.

- **Интеграция с внешними сервисами**. Иногда сторонние SDK (например, **Google Analytics, Stripe**) добавляют глобальные переменные (`window.gtag`), и нам приходится явно описывать их типы.

Если мы обратимся в `TS` коде к такому глобальном объекту, который был объявлен в `JS` коде, то мы резонно получим ошибку, так как `TS` ничего не знает об этом глобальном объекте.

Поэтому нам явно нужно определить, что такое свойство или объект существует, а реализация лежит за пределами `TS`.

```ts
declare global {
  interface Window {
    myAppConfig: { userId: string };
  }
}
```

Теперь при обращении в коде, написанном на `TS`, ошибки не будет.

```ts
console.log(window.myAppConfig.userId);
```

### Работа с JS-библиотеками без типов

В реальных проектах стараются выпиливать библиотеки, которые написаны на чистом `JS`, либо же их обновлять до той версии, где авторы переписали их на `TS`, но есть исключения:

- **Закрытые (внутренние) библиотеки**. В проекте может использоваться библиотека, к кодовой базе которой у тебя нет доступа.

- **Небольшая библиотека на чистом JS**. Некоторые маленькие библиотеки, размещённые на `NPM`, написаны на чистом `JS` и авторы могут просто не переписать её на `TS`.

- **Библиотека устарела и не поддерживается больше**. На проекта используется `deprecated` библиотека, но нет времени, чтобы её выпилить.

Если мы обратимся к методу, про который не знает `TS`, но он существует в либе на `JS`, то мы также получим ошибку, поэтому можно использовать `declare`, чтобы избежать этого.

Например есть либа `math-lib` в `node_modules`, написанная на чистом `JS`, и у неё есть функция `sum` и мы хотим эту функцию юзать в `TS`. Для этого создаётся файл `.d.ts`,  о нём [[Declare#Файлы `.d.ts`|ниже]]

```ts

```

## Файлы `.d.ts`