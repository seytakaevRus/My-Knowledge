TODO: Написать про ковариантность

https://habr.com/ru/articles/218753/
https://metanit.com/kotlin/tutorial/6.3.php?utm_source=chatgpt.com

TODO: Добавить про хак ...[parameters]

### Проблема

Тип функции должен зависеть от того, есть ли параметры в маршруте:

- Если параметры есть — аргумент обязателен
    
- Если нет — аргумент должен отсутствовать
    

### Хак: использование условной распаковки

ts

КопироватьРедактировать

`function fn<...>(   ...[parameters]: Condition extends never ? [] : [ActualType] )`

Такой подход позволяет:

- Убрать второй аргумент полностью, если он не нужен
    
- Сохранять строгую типизацию без `?`, `any` и лишней перегрузки
    

### Альтернатива: перегрузка функций

ts

КопироватьРедактировать

`function fn(arg: A): R; function fn(): R; function fn(arg?: A): R { ... }`

Минус — приходится писать вручную обе сигнатуры, нет автоматического вывода.